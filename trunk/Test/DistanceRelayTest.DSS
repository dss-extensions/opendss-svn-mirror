clear
new circuit.rly21test basekV=12.47 phases=3 pu=1.0 bus1=src
// ~ shots=3 recloseintervals=(2.0, 2.0)

// typical data from Kersting example 4.1
// Z1MAG=0.6977 Z1ANG=63.98 Z0MAG=2.0860 Z0ANG=68.23
new linecode.kex41 r1=0.3061 x1=0.6270 r0=0.7735 x0=1.9373 c1=0 c0=0 units=mi

new line.thev         bus1=src            bus2=mvbus          linecode=kex41 len=0.5 units=mi
new relay.21src type=distance monitoredobj=line.thev monitoredterm=1 switchedterm=1 delay=0.01
~ Z1MAG=0.6977 Z1ANG=63.98 Z0MAG=2.0860 Z0ANG=68.23 Mphase=0.0 Mground=0.0
new relay.21rev type=distance monitoredobj=line.thev monitoredterm=2 switchedterm=2 delay=0.01
~ Z1MAG=0.6977 Z1ANG=63.98 Z0MAG=2.0860 Z0ANG=68.23 Mphase=1.0 Mground=1.0

new line.slgf_21_z1_1 bus1=mvbus          bus2=slgf_21_z1_flt linecode=kex41 len=1.2 units=mi
new line.slgf_21_z1_2 bus1=slgf_21_z1_flt bus2=slgf_21_z1_end linecode=kex41 len=0.8 units=mi
new fault.slgf_21_z1  bus1=slgf_21_z1_flt.1 phases=1 ontime=0.020 r=0.100 temporary=yes
new relay.slgf_21_z1  like=21src monitoredobj=line.slgf_21_z1_1 Mphase=1.4 Mground=1.4 // eventlog=yes
new line.slgf_21_z2_1 bus1=mvbus          bus2=slgf_21_z2_flt linecode=kex41 len=1.6 units=mi
new line.slgf_21_z2_2 bus1=slgf_21_z2_flt bus2=slgf_21_z2_end linecode=kex41 len=0.4 units=mi
new fault.slgf_21_z2  bus1=slgf_21_z2_flt.1 phases=1 ontime=0.420 r=0.100 temporary=yes
new relay.slgf_21_z2  like=21src monitoredobj=line.slgf_21_z2_1 Mphase=1.4 Mground=1.4

new line.llf_21_z1_1  bus1=mvbus          bus2=llf_21_z1_flt  linecode=kex41 len=1.2 units=mi
new line.llf_21_z1_2  bus1=llf_21_z1_flt  bus2=llf_21_z1_end  linecode=kex41 len=0.8 units=mi
new fault.llf_21_z1  bus1=llf_21_z1_flt.2.3 phases=2 ontime=0.120 r=0.001 temporary=yes
new relay.llf_21_z1   like=21src monitoredobj=line.llf_21_z1_1 Mphase=1.4 Mground=1.4
new line.llf_21_z2_1  bus1=mvbus          bus2=llf_21_z2_flt  linecode=kex41 len=1.6 units=mi
new line.llf_21_z2_2  bus1=llf_21_z2_flt  bus2=llf_21_z2_end  linecode=kex41 len=0.4 units=mi
new fault.llf_21_z2  bus1=llf_21_z2_flt.2.3 phases=2 ontime=0.520 r=0.001 temporary=yes
new relay.llf_21_z2   like=21src monitoredobj=line.llf_21_z2_1 Mphase=1.4 Mground=1.4

new line.3pf_21_z1_1  bus1=mvbus          bus2=3pf_21_z1_flt  linecode=kex41 len=1.2 units=mi
new line.3pf_21_z1_2  bus1=3pf_21_z1_flt  bus2=3pf_21_z1_end  linecode=kex41 len=0.8 units=mi
new fault.3pf_21_z1  bus1=3pf_21_z1_flt.1.2.3 phases=3 ontime=0.220 r=0.001 temporary=yes
new relay.3pf_21_z1   like=21src monitoredobj=line.3pf_21_z1_1 Mphase=1.4 Mground=1.4
new line.3pf_21_z2_1  bus1=mvbus          bus2=3pf_21_z2_flt  linecode=kex41 len=1.6 units=mi
new line.3pf_21_z2_2  bus1=3pf_21_z2_flt  bus2=3pf_21_z2_end  linecode=kex41 len=0.4 units=mi
new fault.3pf_21_z2  bus1=3pf_21_z2_flt.1.2.3 phases=3 ontime=0.620 r=0.001 temporary=yes
new relay.3pf_21_z2   like=21src monitoredobj=line.3pf_21_z2_1 Mphase=1.4 Mground=1.4

new monitor.slgf_21_z1 element=fault.slgf_21_z1 mode=32

solve
//solve mode=faultstudy
solve mode=dynamic controlmode=time time=(0,0) stepsize=0.01 number=70
//plot type=monitor object=slgf_21_z1 channels=[1,2]
show eventlog
